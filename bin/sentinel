#!/usr/bin/env python

from sentinel.thrift import Sentinel
from sentinel.thrift.ttypes import *

from thrift import Thrift
from thrift.transport import TSocket
from thrift.transport import TTransport
from thrift.protocol import TBinaryProtocol

try:
    transport = TSocket.TSocket('localhost', 9090)
    transport = TTransport.TBufferedTransport(transport)
    protocol = TBinaryProtocol.TBinaryProtocol(transport)

    client = Sentinel.Client(protocol)
    transport.open()
    
    print(client.report_machine_status())

    transport.close()
except Thrift.TException, tx:
    print('%s' % tx.message)
